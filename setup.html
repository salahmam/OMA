<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª - OMA</title>
<style>
body {
  font-family: 'Cairo', sans-serif;
  background: #f5f9ff;
  color: #102027;
  padding: 30px;
  direction: rtl;
}
.card {
  background: #fff;
  border-radius: 10px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
}
button {
  background: #004aad;
  color: #fff;
  border: none;
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
}
button:hover { background: #003a8c; }
pre {
  background: #eef4ff;
  padding: 10px;
  border-radius: 8px;
  overflow-x: auto;
}
</style>
</head>
<body>

<h2>ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª OMA (Firestore)</h2>
<p>Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø¨Ø§Ù„Ø£Ø³ÙÙ„ØŒ Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Collections Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙÙŠ Firestore.</p>

<div class="card">
  <button id="setupBtn">ğŸš€ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</button>
  <pre id="log"></pre>
</div>

<script type="module" src="https://salahmam.github.io/OMA/firebase-config.js"></script>
<script type="module">
import { db } from "./firebase-config.js";
import { setDoc, doc } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

const log = document.getElementById("log");
const setupBtn = document.getElementById("setupBtn");

function addLog(msg){ log.textContent += msg + "\\n"; }

setupBtn.addEventListener("click", async ()=>{
  addLog("â³ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©...");

  try {
    // ğŸ“˜ Collection: students
    await setDoc(doc(db, "students", "example_student"), {
      name: "Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ",
      address: "Ø¨ØºØ¯Ø§Ø¯",
      phone: "0770000000",
      level: "Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",
      subjects: ["Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø¹Ù„ÙˆÙ…"],
      joinDate: "2025-11-07",
      fees: 500000,
      installments: [250000, 250000],
      status: "Ù†Ø´Ø·"
    });
    addLog("âœ… students collection ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡.");

    // ğŸ“— Collection: teachers
    await setDoc(doc(db, "teachers", "example_teacher"), {
      name: "Ø£Ø³ØªØ§Ø° ÙƒØ±ÙŠÙ…",
      specialty: "Ø±ÙŠØ§Ø¶ÙŠØ§Øª",
      phone: "0780000000",
      salary: 800000,
      percent: 60,
      joinDate: "2025-11-07",
      address: "Ø§Ù„Ø¨ØµØ±Ø©",
      status: "Ù†Ø´Ø·"
    });
    addLog("âœ… teachers collection ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡.");

    // ğŸ“™ Collection: users
    await setDoc(doc(db, "users", "admin_sample"), {
      name: "Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…",
      email: "admin@oma.com",
      type: "admin",
      createdAt: new Date().toISOString()
    });
    addLog("âœ… users collection ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡.");

    // ğŸ“’ Collection: settings
    await setDoc(doc(db, "settings", "percentages"), {
      teacher: 60,
      institute: 40
    });
    addLog("âœ… settings collection ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡.");

    addLog("\\nğŸ‰ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
  } catch (e) {
    addLog("âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: " + e.message);
  }
});
</script>

</body>
</html>