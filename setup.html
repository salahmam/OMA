<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª - OMA</title>
<style>
body { font-family: 'Cairo', sans-serif; background: #f5f9ff; color: #102027; padding: 30px; direction: rtl; }
.card { background: #fff; border-radius: 10px; padding: 20px; margin-bottom: 20px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); }
button { background: #004aad; color: #fff; border: none; padding: 10px 16px; border-radius: 8px; cursor: pointer; font-weight: bold; }
button:hover { background: #003a8c; }
pre { background: #eef4ff; padding: 10px; border-radius: 8px; overflow-x: auto; white-space: pre-wrap; }
</style>
</head>
<body>
<h2>ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª OMA (Firestore)</h2>
<p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©.</p>
<div class="card">
  <button id="setupBtn">ğŸš€ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</button>
  <pre id="log"></pre>
</div>

<script type="module">
import { db } from "./firebase-config.js";
import { setDoc, doc } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

const log = document.getElementById("log");
const setupBtn = document.getElementById("setupBtn");

function addLog(msg){ log.textContent += msg + "\n"; }

setupBtn.addEventListener("click", async ()=>{
  setupBtn.disabled = true;
  setupBtn.textContent = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°...";
  addLog("ğŸ”¹ Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©...");

  try {
    await setDoc(doc(db, "students", "example_student"), {name:"Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ",address:"Ø¨ØºØ¯Ø§Ø¯",phone:"0770000000",level:"Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",group:"A1",subjects:["Ø±ÙŠØ§Ø¶ÙŠØ§Øª","Ø¹Ù„ÙˆÙ…"],joinDate:"2025-11-07",fees:500000,installments:[250000,250000],status:"Ù†Ø´Ø·"});
    addLog("âœ… students collection ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡.");
    await setDoc(doc(db, "teachers", "example_teacher"), {name:"Ø£Ø³ØªØ§Ø° ÙƒØ±ÙŠÙ…",specialty:"Ø±ÙŠØ§Ø¶ÙŠØ§Øª",phone:"0780000000",salary:800000,percent:60,joinDate:"2025-11-07",address:"Ø§Ù„Ø¨ØµØ±Ø©",status:"Ù†Ø´Ø·"});
    addLog("âœ… teachers collection ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡.");
    await setDoc(doc(db, "users", "admin_sample"), {name:"Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…",email:"admin@oma.com",type:"admin",createdAt:new Date().toISOString()});
    addLog("âœ… users collection ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡.");
    await setDoc(doc(db, "settings", "percentages"), {teacher:60,institute:40});
    addLog("âœ… settings collection ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡.");

    addLog("\nğŸ‰ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
    setupBtn.textContent = "âœ… ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­";
    setupBtn.style.background="#00b67a";

    addLog("\nâ¡ï¸ Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø®Ù„Ø§Ù„ 3 Ø«ÙˆØ§Ù†Ù...");
    setTimeout(()=>{window.location.href="dashboard.html";},3000);
  } catch(e){
    addLog("âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: " + e.message);
    setupBtn.disabled=false;
    setupBtn.textContent="ğŸš€ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©";
  }
});
</script>
</body>
</html>