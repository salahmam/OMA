<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ù†Ø¸Ø§Ù… OMA</title>
<style>
:root {
  --primary: #004aad;
  --bg: #f5f9ff;
  --card: #fff;
  --accent: #ffcc33;
}

body {
  font-family: 'Cairo', sans-serif;
  background: var(--bg);
  margin: 0;
  padding: 0;
}

header {
  background-color: var(--primary);
  color: white;
  text-align: center;
  padding: 15px 0;
  font-size: 20px;
  font-weight: bold;
}

.container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 20px;
  padding: 40px;
  justify-content: center;
}

.card {
  background: var(--card);
  padding: 30px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  transition: 0.3s;
  cursor: pointer;
}

.card:hover {
  transform: translateY(-5px);
  background: var(--accent);
  color: white;
}

.card h3 { color: var(--primary); }

#logoutBtn {
  background-color: #d32f2f;
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  transition: 0.3s;
  display: block;
  margin: 30px auto;
}
#logoutBtn:hover { background-color: #b71c1c; }
</style>
</head>
<body>

<header id="dashboardHeader">ğŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</header>

<div class="container">
  <div class="card" id="studentsCard"><h3>ğŸ“š Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨</h3></div>
  <div class="card" id="teachersCard"><h3>ğŸ‘¨â€ğŸ« Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø§ØªØ°Ø©</h3></div>
  <div class="card" id="classesCard"><h3>ğŸ« Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­ØµØµ</h3></div>
  <div class="card" id="attendanceCard"><h3>ğŸ•“ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨</h3></div>
  <div class="card" id="settingsCard"><h3>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3></div>
  <div class="card" id="financeCard"><h3>ğŸ’° Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ù…ØµØ§Ø±ÙŠÙ</h3></div>
</div>

<button id="logoutBtn">ğŸ”“ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";

// ğŸ”¹ Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyAMANgdrLgoGIjqLZOcS_qyEqCUOVC7gOU",
  authDomain: "oma0-33cc0.firebaseapp.com",
  projectId: "oma0-33cc0",
  storageBucket: "oma0-33cc0.firebasestorage.app",
  messagingSenderId: "899300774863",
  appId: "1:899300774863:web:0a81a7f5747ef37d49b8ba",
  measurementId: "G-5CKWYQT9XZ"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// âœ… Ù…Ù†Ø¹ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
onAuthStateChanged(auth, (user) => {
  if (!user) window.location.href = "institute-login.html";
});

// ğŸ”˜ Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
const pageLinks = {
  studentsCard: "students.html",
  teachersCard: "teachers.html",
  classesCard: "classes.html",
  attendanceCard: "attendance.html",
  settingsCard: "settings.html",
  financeCard: "finance.html"
};

Object.keys(pageLinks).forEach(id => {
  const el = document.getElementById(id);
  if (el) el.addEventListener("click", () => window.location.href = pageLinks[id]);
});

// ğŸ”’ Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
document.getElementById("logoutBtn").addEventListener("click", async () => {
  await signOut(auth);
  alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­");
  window.location.href = "institute-login.html";
});

// ğŸ¨ ØªØ·Ø¨ÙŠÙ‚ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø¹Ù‡Ø¯ Ù…Ù† localStorage
const colors = JSON.parse(localStorage.getItem("instituteColors") || "{}");
if(colors.primary) document.documentElement.style.setProperty('--primary', colors.primary);
if(colors.bg) document.documentElement.style.setProperty('--bg', colors.bg);
if(colors.card) document.documentElement.style.setProperty('--card', colors.card);
if(colors.accent) document.documentElement.style.setProperty('--accent', colors.accent);

// ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù‡Ø¯ ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
const instituteName = localStorage.getItem("instituteName") || "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…";
document.getElementById("dashboardHeader").textContent = `ğŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ${instituteName}`;
</script>

</body>
</html>